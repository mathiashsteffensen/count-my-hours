(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(17)},17:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(5),l=a.n(c),s=a(2),o=a.n(s),i=a(4),u=a(1),m=(a(7),a(3)),d=a.n(m);function y(e){var t=e.date,a=e.removeForm,c=Object(n.useState)(t.toISOString().slice(0,10)),l=Object(u.a)(c,2),s=l[0],m=l[1],d=Object(n.useState)(t.toISOString().slice(0,10)),y=Object(u.a)(d,2),p=y[0],f=y[1],h=Object(n.useState)("08:00"),w=Object(u.a)(h,2),v=w[0],b=w[1],x=Object(n.useState)("16:00"),g=Object(u.a)(x,2),E=g[0],N=g[1],j=Object(n.useState)(null),k=Object(u.a)(j,2),O=k[0],S=k[1];return r.a.createElement("form",{className:" md:w-1/2 flex flex-col justify-center items-center p-4 bg-primary opacity-100 w-10/12 rounded shadow relative",onClick:function(e){return e.stopPropagation()},action:""},r.a.createElement("img",{onClick:a,className:"absolute w-10 top-0 right-0 cursor-pointer hover:opacity-75",src:"x-in-circle.svg",alt:"close form"}),r.a.createElement("h3",{className:"font-semibold text-xl mt-4"},"Create a new shift"),r.a.createElement("label",{className:"py-4 flex justify-center items-center"},r.a.createElement("span",{className:"text-left w-2/5"},"Start time: "),r.a.createElement("div",{className:"pt-2 w-3/5"},r.a.createElement("input",{className:"w-full",onChange:function(e){m(e.target.value)},value:s,type:"date"}),r.a.createElement("input",{className:"w-full",onChange:function(e){b(e.target.value)},value:v,type:"time"}))),r.a.createElement("label",{className:"pb-4 flex justify-center items-center"},r.a.createElement("span",{className:"text-left w-2/5"},"End time: "),r.a.createElement("div",{className:"pt-2 w-3/5"},r.a.createElement("input",{className:"w-full",onChange:function(e){f(e.target.value)},value:p,type:"date"}),r.a.createElement("input",{className:"w-full",onChange:function(e){N(e.target.value)},value:E,type:"time"}))),r.a.createElement("p",{className:"text-red-600 text-sm font-semibold pb-2 text-center"},O),r.a.createElement("button",{onClick:function(e){e.preventDefault();var t={startTime:"".concat(s,"/").concat(v),endTime:"".concat(p,"/").concat(E)};fetch("/shifts/create",{method:"POST",credentials:"include",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then(function(){var e=Object(i.a)(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:200===t.status?a():S("Make sure the starting time is before the ending time & the shift is shorter than 24 hours.");case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},className:"bg-secondary text-gray-100 rounded shadow px-4 py-2 hover:opacity-75"},"Add Shift"))}function p(e){var t=e.removeForm,a=Object(n.useState)(!1),c=Object(u.a)(a,2),l=c[0],s=c[1],o=Object(n.useState)(""),i=Object(u.a)(o,2),m=i[0],d=i[1],y=Object(n.useState)(""),p=Object(u.a)(y,2),f=p[0],h=p[1];return r.a.createElement("form",{className:" md:w-1/2 flex flex-col justify-center items-center p-4 bg-primary opacity-100 w-10/12 rounded shadow relative",onClick:function(e){return e.stopPropagation()},action:""},r.a.createElement("img",{onClick:t,className:"absolute w-10 top-0 right-0 cursor-pointer hover:opacity-75",src:"x-in-circle.svg",alt:"close form"}),r.a.createElement("h3",{className:"font-semibold text-xl mt-4"},"Delete your user"),r.a.createElement("label",{className:"font-medium w-full flex flex-col items-center justify-between mt-2"},"Please confirm your password:",r.a.createElement("input",{onChange:function(e){return d(e.target.value)},value:m,className:"text-sm w-8/22 ml-2 py-1 px-2 rounded shadow",type:"password"})),r.a.createElement("label",{className:"font-medium w-full flex flex-col items-center justify-between mt-2"},"Enter the exact text ",r.a.createElement("i",null,'"DELETE"')," to continue:",r.a.createElement("input",{onChange:function(e){return h(e.target.value)},value:f,className:"text-sm w-8/22 ml-2 py-1 px-2 rounded shadow",type:"text"})),r.a.createElement("p",{className:"text-red-600 text-sm font-semibold pb-2 text-center"},l),r.a.createElement("button",{onClick:function(){"DELETE"!==f?s("Please make sure to enter the delete text correctly"):fetch("/settings/account",{method:"delete",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:m})}).then(function(e){switch(e.status){case 200:s("Your account has been deleted, bye"),setTimeout(function(){document.cookie="",window.location.pathname="/"},400);break;case 400:s("Password incorrect");break;case 500:s("An error occured")}})},className:"bg-secondary text-gray-100 rounded shadow px-4 py-2 hover:opacity-75"},"Delete Account"))}function f(e){var t=e.workHours,a=e.removeForm,c=Object(n.useState)(d()(t.startTime).toISOString().slice(0,10)),l=Object(u.a)(c,2),s=l[0],m=l[1],y=Object(n.useState)(d()(t.endTime).toISOString().slice(0,10)),p=Object(u.a)(y,2),f=p[0],h=p[1],w=Object(n.useState)(d()(t.startTime).toISOString().slice(11,16)),v=Object(u.a)(w,2),b=v[0],x=v[1],g=Object(n.useState)(d()(t.endTime).toISOString().slice(11,16)),E=Object(u.a)(g,2),N=E[0],j=E[1],k=Object(n.useState)(null),O=Object(u.a)(k,2),S=O[0],P=O[1];return r.a.createElement("form",{className:" md:w-1/2 flex flex-col justify-center items-center p-4 bg-primary opacity-100 w-10/12 rounded shadow relative",onClick:function(e){return e.stopPropagation()},action:""},r.a.createElement("img",{onClick:a,className:"absolute w-10 top-0 right-0 cursor-pointer hover:opacity-75",src:"x-in-circle.svg",alt:"close form"}),r.a.createElement("h3",{className:"font-semibold text-xl mt-4"},"Update shift"),r.a.createElement("label",{className:"py-4 flex justify-center items-center"},r.a.createElement("span",{className:"text-left w-2/5"},"Start time: "),r.a.createElement("div",{className:"pt-2 w-3/5"},r.a.createElement("input",{className:"w-full",onChange:function(e){m(e.target.value)},value:s,type:"date"}),r.a.createElement("input",{className:"w-full",onChange:function(e){x(e.target.value)},value:b,type:"time"}))),r.a.createElement("label",{className:"pb-4 flex justify-center items-center"},r.a.createElement("span",{className:"text-left w-2/5"},"End time: "),r.a.createElement("div",{className:"pt-2 w-3/5"},r.a.createElement("input",{className:"w-full",onChange:function(e){h(e.target.value)},value:f,type:"date"}),r.a.createElement("input",{className:"w-full",onChange:function(e){j(e.target.value)},value:N,type:"time"}))),r.a.createElement("p",{className:"text-red-600 text-sm font-semibold pb-2 text-center"},S),r.a.createElement("button",{onClick:function(e){e.preventDefault();var n={startTime:"".concat(s,"/").concat(b),endTime:"".concat(f,"/").concat(N)};console.log(n),fetch("/shifts/",{method:"PATCH",credentials:"include",headers:{"content-type":"application/json"},body:JSON.stringify({shiftID:t._id,updates:n})}).then(function(){var e=Object(i.a)(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=4;break}a(),e.next=9;break;case 4:return e.next=6,t.text();case 6:n=e.sent,console.log(n),P("Make sure the starting time is before the ending time");case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},className:"bg-secondary text-gray-100 rounded shadow px-4 py-2 hover:opacity-75"},"Update"))}function h(e){var t=e.formType,a=e.date,n=e.removeForm,c=e.workHours;switch(t){case"add-shift":return r.a.createElement(y,{removeForm:n,date:a||null});case"update-shift":return r.a.createElement(f,{workHours:c,removeForm:n});case"delete-acc":return r.a.createElement(p,{removeForm:n})}}function w(e){var t=e.removeForm,a=e.formType,n=e.date,c=e.workHours;return r.a.createElement("div",{onClick:t,className:"absolute inset-0 h-full w-full bg-opaque"},r.a.createElement("div",{className:"sticky inset-1/4 flex justify-center items-center"},r.a.createElement(h,{workHours:c,removeForm:t,date:n,formType:a})))}function v(e,t,a,n){e?l.a.render(r.a.createElement(w,{workHours:n.workHours?n.workHours:null,date:n.date?n.date:null,removeForm:a,formType:t}),document.getElementById("popup")):l.a.render("",document.getElementById("popup"))}function b(e){var t=e.workHours,a=e.refresh,n=t.startTime.slice(11,16),c=t.endTime.slice(11,16),l=function(){v(!1),a()};return r.a.createElement("div",{className:"py-2 lg:p-y0 flex flex-1 justify-between items-center w-11/12 bg-primary mb-2 px-4 rounded-lg shadow-lg"},r.a.createElement("p",{className:"m-0 lg:w-3/5"},n," - ",c),r.a.createElement("div",{className:" lg:w-2/5 flex justify-evenly items-center"},r.a.createElement("button",{onClick:function(){fetch("/shifts/",{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({shiftID:t._id})}).then(function(e){200===e.status&&a()})},className:"hover:opacity-75 outline-none w-6 mx-1 lg:my-1"},r.a.createElement("img",{src:"x-in-circle-red.svg",alt:"delete shift"})),r.a.createElement("button",{onClick:function(e){e.stopPropagation(),v(!0,"update-shift",l,{workHours:t})},className:"hover:opacity-75 outline-none w-6 lg:my-1"},r.a.createElement("img",{src:"edit.svg",alt:"edit shift"}))))}function x(e){switch(e){case 0:return"January";case 1:return"February";case 2:return"March";case 3:return"April";case 4:return"May";case 5:return"June";case 6:return"July";case 7:return"August";case 8:return"September";case 9:return"October";case 10:return"November";case 11:return"December"}}function g(e){switch(e.toLowerCase()){case"sunday":return 0;case"monday":return 1;case"tuesday":return 2;case"wednesday":return 3;case"thursday":return 4;case"friday":return 5;case"saturday":return 6}}function E(e){switch(e){case 0:return"Sunday";case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday"}}function N(e){var t=e.date,a=e.handleComplete,c=e.allComplete,l=e.refresh,s=Object(n.useState)(!1),m=Object(u.a)(s,2),d=m[0],y=m[1],p=Object(n.useState)(!1),f=Object(u.a)(p,2),h=f[0],w=f[1];Object(n.useEffect)(function(){var e=!0;return function(){var n=Object(i.a)(o.a.mark(function n(){var r;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(""+"/shifts/onDay/".concat(t.toJSON().slice(0,10)),{credentials:"include"}).then(function(e){return e.json()}).catch(function(e){return console.log(e)});case 2:r=n.sent,e&&y(r),c||a(t.day());case 5:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}()(),function(){return e=!1}},[t,h]);var x=function(){v(!1),l()},g=function(){w(!h)};return c&&d?r.a.createElement("div",{className:"lg:mx-2 lg:px-2 lg:flex-1 font-medium flex justify-center items-center flex-col py-4 bg-gray-200 w-10/12 mb-4 rounded shadow"},r.a.createElement("h5",null,E(t.day())," ",t.date(),"/",t.month()+1),d.map(function(e,t){return r.a.createElement(b,{refresh:g,key:t,workHours:e})}),r.a.createElement("button",{onClick:function(e){e.stopPropagation(),v(!0,"add-shift",x,{date:t})},className:"lg:px-1 bg-secondary text-gray-100 rounded shadow px-4 py-2 hover:opacity-75"},"Add Shift")):null}function j(){var e=d()(),t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(e),o=Object(u.a)(s,2),i=o[0],m=o[1],y=Object(n.useState)(0),p=Object(u.a)(y,2),f=p[0],h=p[1],w=Object(n.useState)(!1),v=Object(u.a)(w,2),b=v[0],x=v[1],g=[],E=function(){h(0),x(!b)},j=function(e){g.push(e),h(g.length)};Object(n.useEffect)(function(){var e=[[i.day(1),i.day(2),i.day(3)],[i.day(4),i.day(5),i.day(6),i.date(i.date()+7).day(0)]];l(e)},[i,b]);return c?r.a.createElement("div",{className:"flex justify-center items-center w-1/1 flex-col w-11/12"},r.a.createElement("div",{className:"w-full flex justify-center items-center my-2"},r.a.createElement("button",{onClick:function(){m(i.subtract(7,"day")),h(0)},className:"hover:opacity-75 outline-none w-8 mx-4"},r.a.createElement("img",{src:"previous-pagination.svg",alt:"previous week"})),r.a.createElement("button",{onClick:function(){m(e),h(0)},className:"px-1 bg-secondary text-gray-100 rounded shadow py-1 hover:opacity-75"},"Today"),r.a.createElement("button",{onClick:function(){m(i.add(7,"day")),h(0)},className:"hover:opacity-75 outline-none w-8 mx-4"},r.a.createElement("img",{src:"next-pagination.svg",alt:"previous week"}))),r.a.createElement("h3",{className:"w-4/5 text-primary font-semibold text-center"},"Week of ",c[0][0].date(),"/",c[0][0].month()+1," to ",c[1][3].date(),"/",c[1][3].month()+1),7===f?null:r.a.createElement("img",{className:"w-16",src:"loader.svg",alt:"loading"}),r.a.createElement("div",{className:"flex justify-center items-center lg:w-3/4 w-full flex-col lg:flex-row"},c[0].map(function(e,t){return r.a.createElement(N,{index:t,refresh:E,key:t,handleComplete:j,allComplete:7===f,date:e})})),r.a.createElement("div",{className:"flex justify-center items-center w-1/1 flex-col lg:flex-row w-full"},c[1].map(function(e,t){return r.a.createElement(N,{index:t,refresh:E,key:t+3,handleComplete:j,allComplete:7===f,date:e})}))):r.a.createElement("div",{className:"flex justify-center items-center w-1/1"},r.a.createElement("img",{className:"w-16",src:"loader.svg",alt:"loading"}))}function k(e){var t=e.workHours,a=e.refresh,n=t.startTime.slice(11,16),c=t.endTime.slice(11,16),l=function(){v(!1),a()};return r.a.createElement("div",{className:"py-2 lg:p-y0 flex justify-between items-center w-11/12 bg-primary mb-2 px-4 rounded-lg shadow-lg"},r.a.createElement("p",{className:"m-0 lg:w-3/5"},n," - ",c),r.a.createElement("p",{className:"m-0 lg:w-3/5"},t.startTime.slice(8,10),"/",t.startTime.slice(5,7)),r.a.createElement("div",{className:"lg:w-2/5 flex justify-evenly items-center"},r.a.createElement("button",{onClick:function(){fetch("/shifts/",{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({shiftID:t._id})}).then(function(e){200===e.status&&a()})},className:"hover:opacity-75 outline-none w-6 mx-1 lg:my-1"},r.a.createElement("img",{src:"x-in-circle-red.svg",alt:"delete shift"})),r.a.createElement("button",{onClick:function(e){e.stopPropagation(),v(!0,"update-shift",l,{workHours:t})},className:"hover:opacity-75 outline-none w-6 lg:my-1"},r.a.createElement("img",{src:"edit.svg",alt:"edit shift"}))))}var O=a(8),S=a.n(O);function P(e){var t=e.shifts,a=e.user,n={numberOfShifts:t.length,totalTimeWorked:function(){var e=0;return t.forEach(function(t){var a=d.a.utc(t.startTime),n=d.a.utc(t.endTime).diff(a)/1e3/60/60;e+=n}),e.toFixed(2)}()};return n.averageShiftLength=(n.totalTimeWorked/n.numberOfShifts).toFixed(2),a&&(n.totalEarned=n.totalTimeWorked*a.hourlySalary),r.a.createElement("div",{className:"flex justify-center items-center flex-col text-center bg-accent p-4 rounded-md shadow-lg"},r.a.createElement("p",{className:"text-md font-medium text-primary my-1"},n.numberOfShifts," shifts in period."),r.a.createElement("p",{className:"text-md font-medium text-primary my-1"},"An average shift length of ",isNaN(Number(n.averageShiftLength))?0:Number(n.averageShiftLength)," hours for a total of ",Number(n.totalTimeWorked)," hours."),a?r.a.createElement("p",{className:"text-md font-medium text-primary my-1"},"With an hourly salary of ",a.hourlySalary," that is ",n.totalEarned," earned during the period."):null,a?r.a.createElement("p",{className:"text-xs text-primary my-1"},"*You can change you hourly salary in your settings"):null)}function C(){var e=d()(),t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(e),m=Object(u.a)(s,2),y=m[0],p=m[1],f=Object(n.useState)(!1),h=Object(u.a)(f,2),w=h[0],b=h[1];Object(n.useEffect)(function(){w||function(){var e=Object(i.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(""+"/shifts/inMonth/".concat(y.toJSON().slice(0,10)),{credentials:"include"}).then(function(e){return e.json()}).catch(function(e){return console.log(e)});case 2:t=e.sent,l(t),b(!0);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[w]);var g=function(){p(y.add(1,"month")),b(!1)},E=function(){p(y.subtract(1,"month")),b(!1)},N=function(){p(e),b(!1)},j=function(){v(!1),b(!1)};return w?r.a.createElement("div",{className:"flex justify-center items-center w-1/1 flex-col w-11/12"},r.a.createElement("div",{className:"w-full flex justify-center items-center my-2"},r.a.createElement("button",{onClick:E,className:"hover:opacity-75 outline-none w-8 mx-4"},r.a.createElement("img",{src:"previous-pagination.svg",alt:"previous week"})),r.a.createElement("button",{onClick:N,className:"px-1 bg-secondary text-gray-100 rounded shadow py-1 hover:opacity-75"},"Today"),r.a.createElement("button",{onClick:g,className:"hover:opacity-75 outline-none w-8 mx-4"},r.a.createElement("img",{src:"next-pagination.svg",alt:"previous week"}))),r.a.createElement("h3",{className:"w-4/5 text-primary font-semibold text-center"},x(y.month()),", ",y.year()),r.a.createElement("div",{className:"w-11/12 font-medium mt-2"},c.length<1?r.a.createElement("h4",{className:"text-center"},"No shifts this month"):c.map(function(e){return r.a.createElement(k,{key:e._id,refresh:function(){return b(!1)},workHours:e})})),r.a.createElement("button",{onClick:function(e){e.stopPropagation(),v(!0,"add-shift",j,{date:y})},className:"lg:px-1 bg-secondary my-2 text-gray-100 rounded shadow px-4 py-2 hover:opacity-75"},"Add Shift"),r.a.createElement(P,{shifts:c})):r.a.createElement("div",{className:"flex flex-col justify-center items-center w-1/1"},r.a.createElement("div",{className:"w-full flex justify-center items-center my-2"},r.a.createElement("button",{onClick:E,className:"hover:opacity-75 outline-none w-8 mx-4"},r.a.createElement("img",{src:"previous-pagination.svg",alt:"previous week"})),r.a.createElement("button",{onClick:N,className:"px-1 bg-secondary text-gray-100 rounded shadow py-1 hover:opacity-75"},"Today"),r.a.createElement("button",{onClick:g,className:"hover:opacity-75 outline-none w-8 mx-4"},r.a.createElement("img",{src:"next-pagination.svg",alt:"previous week"}))),r.a.createElement("h3",{className:"w-4/5 text-primary font-semibold text-center"},x(y.month()),", ",y.year()),r.a.createElement("img",{className:"w-16",src:"loader.svg",alt:"loading"}))}function T(e){var t=e.user,a=d()(),c=Object(n.useState)(!1),l=Object(u.a)(c,2),s=l[0],m=l[1],y=Object(n.useState)(a.day(0)),p=Object(u.a)(y,2),f=p[0],h=p[1],w=Object(n.useState)(!1),b=Object(u.a)(w,2),N=b[0],j=b[1];Object(n.useEffect)(function(){N||function(){var e=Object(i.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(""+"/shifts/inPayPeriod/".concat(f.toJSON().slice(0,10)),{credentials:"include"}).then(function(e){return e.json()}).catch(function(e){return console.log(e)});case 2:t=e.sent,m(t),j(!0);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[N]);var O=function(){switch(t.payPeriodType){case"weekly":return 7;case"biweekly":return 14;case"monthly":return 29}},S=function(){h(f.add(O(),"days")),j(!1)},C=function(){h(f.subtract(O(),"days")),j(!1)},T=function(){h(a),j(!1)},D=function(){v(!1),j(!1)},W=function(){switch(t.payPeriodType){case"weekly":return r.a.createElement("span",null,"Shifts payed out on ",E(g(t.payPeriodWeekly.payOutDay)),", ",f.day(g(t.payPeriodWeekly.payOutDay)).date(),"/",f.day(g(t.payPeriodWeekly.payOutDay)).month()+1," ",r.a.createElement("br",null),"Pay Period from ",f.day(g(t.payPeriodWeekly.payPeriodDay)).subtract(7,"days").date(),"/",f.day(g(t.payPeriodWeekly.payPeriodDay)).subtract(7,"days").month()+1," to ",f.day(g(t.payPeriodWeekly.payPeriodDay)-1).date(),"/",f.day(g(t.payPeriodWeekly.payPeriodDay)).month()+1);case"biweekly":return r.a.createElement("span",null,"Shifts payed out on ",E(g(t.payPeriodBiWeekly.payOutDay)),", ",f.day(g(t.payPeriodBiWeekly.payOutDay)).date(),"/",f.day(g(t.payPeriodBiWeekly.payOutDay)).month()+1," ",r.a.createElement("br",null),"Pay Period from ",f.day(g(t.payPeriodBiWeekly.payPeriodDay)).subtract(14,"days").date(),"/",f.day(g(t.payPeriodBiWeekly.payPeriodDay)).subtract(14,"days").month()+1," to ",f.day(g(t.payPeriodBiWeekly.payPeriodDay)-1).date(),"/",f.day(g(t.payPeriodBiWeekly.payPeriodDay)).month()+1);case"monthly":return r.a.createElement("span",null,"Shifts payed out for ",x(f.month()),", ",f.year()," ",r.a.createElement("br",null)," Pay Period from ",t.payPeriodMonthly.startDate,"/",f.month()," to ",t.payPeriodMonthly.startDate-1,"/",f.month()+1)}};return N?r.a.createElement("div",{className:"flex justify-center items-center w-1/1 flex-col w-11/12"},r.a.createElement("div",{className:"w-full flex justify-center items-center my-2"},r.a.createElement("button",{onClick:C,className:"hover:opacity-75 outline-none w-8 mx-4"},r.a.createElement("img",{src:"previous-pagination.svg",alt:"previous week"})),r.a.createElement("button",{onClick:T,className:"px-1 bg-secondary text-gray-100 rounded shadow py-1 hover:opacity-75"},"Today"),r.a.createElement("button",{onClick:S,className:"hover:opacity-75 outline-none w-8 mx-4"},r.a.createElement("img",{src:"next-pagination.svg",alt:"previous week"}))),r.a.createElement("h3",{className:"w-full text-primary font-semibold text-center"},W()),r.a.createElement("div",{className:"w-11/12 font-medium mt-2"},s&&s.length<1?r.a.createElement("h4",null,"No shifts this pay period"):s.map(function(e){return r.a.createElement(k,{key:e._id,refresh:function(){return j(!1)},workHours:e})})),r.a.createElement("button",{onClick:function(e){e.stopPropagation(),v(!0,"add-shift",D,{date:f})},className:"lg:px-1 bg-secondary my-2 text-gray-100 rounded shadow px-4 py-2 hover:opacity-75"},"Add Shift"),r.a.createElement(P,{shifts:s,user:t})):r.a.createElement("div",{className:"flex flex-col justify-center items-center w-1/1"},r.a.createElement("div",{className:"w-full flex justify-center items-center my-2"},r.a.createElement("button",{onClick:C,className:"hover:opacity-75 outline-none w-8 mx-4"},r.a.createElement("img",{src:"previous-pagination.svg",alt:"previous week"})),r.a.createElement("button",{onClick:T,className:"px-1 bg-secondary text-gray-100 rounded shadow py-1 hover:opacity-75"},"Today"),r.a.createElement("button",{onClick:S,className:"hover:opacity-75 outline-none w-8 mx-4"},r.a.createElement("img",{src:"next-pagination.svg",alt:"previous week"}))),r.a.createElement("h3",{className:"w-11/12 text-primary font-semibold text-center"},W()),r.a.createElement("img",{className:"w-16",src:"loader.svg",alt:"loading"}))}d.a.extend(S.a);var D=a(9);function W(e){var t,a=e.payPeriodType,c=e.startDate,l=e.startDay,s=e.payOutDay,o=e.payOutWeek,i=Object(n.useState)("hidden"),m=Object(u.a)(i,2),y=m[0],p=m[1],f=function(){p("bg-gray-300 w-64 p-2 rounded shadow-md -mt-4 mb-4")},h=function(){p("hidden")};switch(a){case"monthly":return t="This means your paycheck for August will span hours worked from ".concat(c.value," June up to and including ").concat(Number(c.value)-1," August"),r.a.createElement("div",{className:"w-full flex justify-center items-center flex-col"},r.a.createElement("label",{className:"font-medium w-full flex items-center justify-between mt-2"},"Start of Pay Period:",r.a.createElement("input",{min:"1",max:"28",onChange:function(e){return c.update(e.target.value)},value:c.value,className:"text-sm w-8/22 ml-2 py-1 px-2 rounded shadow",type:"number"})),r.a.createElement("label",{className:"font-medium w-full flex items-center justify-between mt-2"},"End of Pay Period:",r.a.createElement("input",{min:"1",max:"28",readOnly:!0,value:Number(c.value)-1<1?1:Number(c.value)-1,className:"bg-gray-200 cursor-not-allowed text-sm w-8/22 ml-2 py-1 px-2 rounded shadow",type:"number"})),r.a.createElement("img",{onMouseOut:h,onMouseOver:f,className:"w-6 mb-4",src:"help.svg",alt:"help"}),r.a.createElement("div",{className:y},r.a.createElement("p",null,t)));case"biweekly":var w=d()().day(g(l.value)),v=w.date(w.date()+13);return t="\n                This means for the 14 days spanning ".concat(l.value,", ").concat(w.date(),"/").concat(w.month()+1," \n                to ").concat(E(g(l.value)-1).toLowerCase(),", ").concat(v.date(),"/").concat(v.month()+1,",\n                both days included, you will be paid on ").concat(s.value," ").concat(v.set("day",g(s.value)).date(),"/").concat(v.set("day",g(s.value)).month()+1,"\n            "),r.a.createElement("div",{className:"w-full flex justify-center items-center flex-col"},r.a.createElement("label",{className:"font-medium w-full flex items-center justify-between mt-2"},"Payed on:",r.a.createElement("div",{className:" flex flex-col justify-center items-center w-3/5"},r.a.createElement("select",{value:o.value,onChange:function(e){return o.update(e.target.value)},className:"text-sm w-full ml-2 bg-white py-1 px-2 rounded shadow",type:"number",name:"pay-period",id:"pay-period"},r.a.createElement("option",{value:"even"},"Even Weeks"),r.a.createElement("option",{value:"uneven"},"Uneven Weeks")),r.a.createElement("select",{value:s.value,onChange:function(e){return s.update(e.target.value)},className:"mt-2 text-sm w-full ml-2 bg-white py-1 px-2 rounded shadow",type:"number",name:"pay-period",id:"pay-period"},r.a.createElement("option",{value:"monday"},"Monday"),r.a.createElement("option",{value:"tuesday"},"Tuesday"),r.a.createElement("option",{value:"wednesday"},"Wednesday"),r.a.createElement("option",{value:"thursday"},"Thursday"),r.a.createElement("option",{value:"friday"},"Friday"),r.a.createElement("option",{value:"saturday"},"Saturday"),r.a.createElement("option",{value:"sunday"},"Sunday")))),r.a.createElement("label",{className:"font-medium w-full flex items-center justify-between mt-2"},"Pay Period starts on:",r.a.createElement("select",{value:l.value,onChange:function(e){return l.update(e.target.value)},className:"text-sm w-2/6 ml-2 bg-white py-1 px-2 rounded shadow",type:"number",name:"pay-period",id:"pay-period"},r.a.createElement("option",{value:"monday"},"Monday"),r.a.createElement("option",{value:"tuesday"},"Tuesday"),r.a.createElement("option",{value:"wednesday"},"Wednesday"),r.a.createElement("option",{value:"thursday"},"Thursday"),r.a.createElement("option",{value:"friday"},"Friday"),r.a.createElement("option",{value:"saturday"},"Saturday"),r.a.createElement("option",{value:"sunday"},"Sunday"))),r.a.createElement("label",{className:"font-medium w-full flex items-center justify-between mt-2"},"Pay Period ends on:",r.a.createElement("input",{readOnly:!0,value:E(g(l.value)-1),className:"text-sm w-2/6 ml-2 cursor-not-allowed py-1 px-2 bg-gray-200 rounded shadow",type:"text"})),r.a.createElement("img",{onMouseOut:h,onMouseOver:f,className:"w-6 mb-4",src:"help.svg",alt:"help"}),r.a.createElement("div",{className:y},r.a.createElement("p",null,t)));case"weekly":return v=(w=d()().day(g(l.value))).date(w.date()+6),t="\n                This means for the 7 days spanning ".concat(l.value,", ").concat(w.date(),"/").concat(w.month()+1," \n                to ").concat(E(g(l.value)-1).toLowerCase(),", ").concat(v.date(),"/").concat(v.month()+1,",\n                both days included, you will be paid on ").concat(s.value," ").concat(v.set("day",g(s.value)).date(),"/").concat(v.set("day",g(s.value)).month()+1,"\n            "),r.a.createElement("div",{className:"w-full flex justify-center items-center flex-col"},r.a.createElement("label",{className:"font-medium w-full flex items-center justify-between mt-2"},"Payed on:",r.a.createElement("div",{className:" flex flex-col justify-center items-center w-3/5"},r.a.createElement("select",{value:s.value,onChange:function(e){return s.update(e.target.value)},className:" text-sm w-full ml-2 bg-white py-1 px-2 rounded shadow",type:"number",name:"pay-period",id:"pay-period"},r.a.createElement("option",{value:"Monday"},"Monday"),r.a.createElement("option",{value:"Tuesday"},"Tuesday"),r.a.createElement("option",{value:"Wednesday"},"Wednesday"),r.a.createElement("option",{value:"Thursday"},"Thursday"),r.a.createElement("option",{value:"Friday"},"Friday"),r.a.createElement("option",{value:"Saturday"},"Saturday"),r.a.createElement("option",{value:"Sunday"},"Sunday")))),r.a.createElement("label",{className:"font-medium w-full flex items-center justify-between mt-2"},"Pay Period starts on:",r.a.createElement("select",{value:l.value,onChange:function(e){return l.update(e.target.value)},className:"text-sm w-2/6 ml-2 bg-white py-1 px-2 rounded shadow",type:"number",name:"pay-period",id:"pay-period"},r.a.createElement("option",{value:"monday"},"Monday"),r.a.createElement("option",{value:"tuesday"},"Tuesday"),r.a.createElement("option",{value:"wednesday"},"Wednesday"),r.a.createElement("option",{value:"thursday"},"Thursday"),r.a.createElement("option",{value:"friday"},"Friday"),r.a.createElement("option",{value:"saturday"},"Saturday"),r.a.createElement("option",{value:"sunday"},"Sunday"))),r.a.createElement("label",{className:"font-medium w-full flex items-center justify-between mt-2"},"Pay Period ends on:",r.a.createElement("input",{readOnly:!0,value:E(g(l.value)-1),className:"text-sm w-2/6 ml-2 cursor-not-allowed py-1 px-2 bg-gray-200 rounded shadow",type:"text"})),r.a.createElement("img",{onMouseOut:h,onMouseOver:f,className:"w-6 mb-4",src:"help.svg",alt:"help"}),r.a.createElement("div",{className:y},r.a.createElement("p",null,t)));default:return null}}function M(e){var t=e.user,a=e.refresh,c=Object(n.useState)(t.payPeriodType),l=Object(u.a)(c,2),s=l[0],o=l[1],i=Object(n.useState)(t.hourlySalary),m=Object(u.a)(i,2),d=m[0],y=m[1],p=Object(n.useState)(t.payPeriodMonthly.startDate),f=Object(u.a)(p,2),h=f[0],w=f[1],b=Object(n.useState)("weekly"===s?t.payPeriodWeekly.payPeriodDay:t.payPeriodBiWeekly.payPeriodDay),x=Object(u.a)(b,2),g=x[0],E=x[1],N=Object(n.useState)("weekly"===s?t.payPeriodWeekly.payOutDay:t.payPeriodBiWeekly.payOutDay),j=Object(u.a)(N,2),k=j[0],O=j[1],S=Object(n.useState)(t.payPeriodBiWeekly.payOutWeek),P=Object(u.a)(S,2),C=P[0],T=P[1],M=Object(n.useState)(null),F=Object(u.a)(M,2),H=F[0],B=F[1],J=Object(n.useState)(t.username),A=Object(u.a)(J,2),I=A[0],L=A[1],U=Object(n.useState)(!1),_=Object(u.a)(U,2),q=_[0],Y=_[1],z=Object(n.useState)(""),G=Object(u.a)(z,2),K=G[0],Q=G[1],R=Object(n.useState)(""),V=Object(u.a)(R,2),X=V[0],Z=V[1],$=Object(n.useState)(""),ee=Object(u.a)($,2),te=ee[0],ae=ee[1],ne=function(){v(!1)};return r.a.createElement("div",{className:"flex justify-center items-center flex-col"},r.a.createElement("h2",{className:"w-4/5 text-primary font-semibold text-center"},"Settings"),r.a.createElement("form",{className:"w-10/12 flex justify-center items-center flex-col mt-2 bg-gray-200 rounded-md shadow-md p-4"},r.a.createElement("h3",{className:"text-xl"},"Pay Period Settings"),r.a.createElement("label",{className:"font-medium w-full flex items-center justify-between"},"Hourly Salary:",r.a.createElement("input",{onChange:function(e){return y(e.target.value)},value:d,className:"text-sm w-2/5 ml-2 py-1 px-2 rounded shadow",type:"number"})),r.a.createElement("label",{className:"font-medium mt-2 w-full flex items-center justify-between"},"Pay Period Type:",r.a.createElement("select",{onChange:function(e){return o(e.target.value)},value:s,className:"text-sm w-2/5 ml-2 bg-white py-1 px-2 rounded shadow",type:"number",name:"pay-period",id:"pay-period"},r.a.createElement("option",{value:"weekly"},"Weekly"),r.a.createElement("option",{value:"biweekly"},"Bi-Weekly"),r.a.createElement("option",{value:"monthly"},"Monthly"))),r.a.createElement(W,{payPeriodType:s,payOutDay:{value:k,update:O},payOutWeek:{value:C,update:T},startDay:{value:g,update:E},startDate:{value:h,update:w}}),r.a.createElement("h3",{className:"text-xl"},"Profile Settings"),r.a.createElement("label",{className:"font-medium w-full flex items-center justify-between mt-2"},"Username:",r.a.createElement("input",{onChange:function(e){return L(e.target.value)},value:I,className:"text-sm w-2/5 ml-2 py-1 px-2 rounded shadow",type:"text"})),q?r.a.createElement("div",{className:"mt-4 w-11/12 text-sm"},r.a.createElement("label",{className:"w-full flex items-center justify-between mt-2"},"Old Password:",r.a.createElement("input",{onChange:function(e){return Q(e.target.value)},value:K,className:"text-sm w-1/2 ml-2 py-1 px-2 rounded shadow",type:"password"})),r.a.createElement("label",{className:"w-full flex items-center justify-between mt-2"},"New Password:",r.a.createElement("input",{onChange:function(e){return Z(e.target.value)},value:X,className:"text-sm w-1/2 ml-2 py-1 px-2 rounded shadow",type:"password"})),r.a.createElement("label",{className:"w-full flex items-center justify-between mt-2"},"Confirm New:",r.a.createElement("input",{onChange:function(e){return ae(e.target.value)},value:te,className:"text-sm w-1/2 ml-2 py-1 px-2 rounded shadow",type:"password"}))):null,r.a.createElement("button",{type:"button",onClick:function(){return Y(!q)},className:q?"animate-bounce w-10 my-4":"text-blue-500 underline text-sm mt-2"},q?r.a.createElement("img",{src:"up.svg",alt:"arrow up"}):"Click here to change your password."),r.a.createElement("button",{onClick:function(e){var t;e.preventDefault(),t=q&&""!==K&&""!==X&&""!==te?"/settings/save/change-password":"/settings/save";var n={};q&&(n={password:X});var r={};switch(s){case"monthly":if(h<1||h>28)return B("startDate should be minimum 1 and maximum 28");r={payPeriodMonthly:{startDate:h}};break;case"biweekly":r={payPeriodBiWeekly:{payOutWeek:C,payOutDay:k,payPeriodDay:g}};break;case"weekly":r={payPeriodWeekly:{payOutDay:k,payPeriodDay:g}}}X!==te?B("Make sure you wrote the same new password twice"):fetch(t,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({updates:Object(D.a)({hourlySalary:d,payPeriodType:s,username:I},r,n),oldPassword:K})}).then(function(e){"change-password"===t.slice(-15)?200===e.status?(document.cookie="",window.location="https://countmyhours.com/login"):400===e.status?B("Incorrect password"):B("An error occured when trying to change your password"):(a(),B("Saved!"))})},className:"my-2 text-lg bg-secondary text-gray-100 rounded shadow mx-2 px-4 py-2 hover:opacity-75"},"Save"),r.a.createElement("button",{onClick:function(){v(!0,"delete-acc",ne,{})},type:"button",className:"text-red-500 underline text-xs mt-2"},"Delete account."),r.a.createElement("h5",null,H)))}function F(e){var t=e.viewtype,a=e.user,n=e.refreshUser;switch(t){case"week":return r.a.createElement(j,null);case"month":return r.a.createElement(C,null);case"pay-period":return r.a.createElement(T,{user:a});case"settings":return r.a.createElement(M,{refresh:n,user:a})}}var H=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)("month"),s=Object(u.a)(l,2),m=s[0],d=s[1],y=function(){var e=Object(i.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/is-api-key-valid",{credentials:"include"}).then(function(e){if(200===e.status)return e.json();window.location.href="/login"}).catch(function(e){return console.log(e)});case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){y()},[]),a?r.a.createElement("section",{className:"h-full w-full"},r.a.createElement("header",null,r.a.createElement("button",{onClick:function(){return d("settings")},className:"settings"===m?"opacity-75 shadow outline-none w-10 absolute mt-2 ml-2":"hover:opacity-75 shadow outline-none w-10 absolute mt-2 ml-2"},r.a.createElement("img",{src:"setting.svg",alt:"Settings"})),r.a.createElement("div",{className:" min-h-16 text-primary flex items-center mx-4"},r.a.createElement("h1",{className:"text-center font-bold text-2xl w-full"},"HELLO ",a.username.toUpperCase(),"!"))),r.a.createElement("main",{className:"m-auto w-full flex justify-center items-center flex-col"},r.a.createElement("div",{className:"my-4 flex justify-between items-center w-10/12 lg:w-4/12"},r.a.createElement("div",{className:"flex flex-1 justify-center items-center"},r.a.createElement("button",{onClick:function(){return d("week")},className:"week"===m?"px-1 text-sm bg-secondary text-gray-100 rounded shadow mx-2 py-2 opacity-75":"px-1 text-sm bg-secondary text-gray-100 rounded shadow mx-2 py-2 hover:opacity-75 "},"Week")),r.a.createElement("div",{className:"flex flex-1 justify-center items-center"},r.a.createElement("button",{onClick:function(){return d("month")},className:"month"===m?"px-1 text-sm bg-secondary text-gray-100 rounded shadow mx-2 py-2 opacity-75":"px-1 text-sm bg-secondary text-gray-100 rounded shadow mx-2 py-2 hover:opacity-75 "},"Month")),r.a.createElement("div",{className:"flex flex-1 justify-center items-center"},r.a.createElement("button",{onClick:function(){return d("pay-period")},className:"pay-period"===m?"px-1 text-sm bg-secondary text-gray-100 rounded shadow mx-2 py-2 opacity-75":"px-1 text-sm bg-secondary text-gray-100 rounded shadow mx-2 py-2 hover:opacity-75 "},"Pay Period"))),r.a.createElement(F,{refreshUser:function(){y()},user:a,viewtype:m})),r.a.createElement("footer",{className:"flex justify-center items-center flex-col bg-primary mt-4 py-4 w-screen"},r.a.createElement("h5",{className:"flex items-center"},"Made with ",r.a.createElement("img",{className:"w-5 ml-2",src:"heart.svg",alt:"love"})),r.a.createElement("h6",{className:"text-sm"},"Want to request a feature? ",r.a.createElement("a",{className:"text-accent underline cursor-pointer",href:"/request-feature"},"Click here!")),r.a.createElement("img",{className:"w-32 ml-2 pt-2",src:"count-my-hours-logo.svg",alt:"love"}))):r.a.createElement("div",{className:"flex justify-center items-center h-screen"},r.a.createElement("img",{className:"w-16",src:"loader.svg",alt:"loading"}))};l.a.render(r.a.createElement(H,null),document.getElementById("root"))},7:function(e,t,a){}},[[10,1,2]]]);
//# sourceMappingURL=main.ced7aaa5.chunk.js.map